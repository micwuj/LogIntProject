{% extends 'base.html' %}
{% load static %}
{% block content %}

<h1> Home - Integration({{ integration.integration_name }}) </h1>

<div class="mb-2 bg-link-light">

    <table class="table table-striped table-light table-hover">
        <thead>
            <tr>
                <th class="align-middle">Integration</th>
                <th>App</th>
                <th class="align-middle">Customer</th>
                <th class="align-middle">Source</th>
                <th class="align-middle">Type</th>
                <th class="align-middle">Date</th>
                <th class="align-middle">Action</th>
            </tr>
        </thead>
        <tbody>
            <tr id="integration-{{ integration.pk }}">
                <td class="align-middle">{{ integration.integration_name }}</td>
                <td class="align-middle">{{ integration.app_name }}</td>
                <td class="align-middle">{{ integration.customer }}</td>
                <td class="align-middle">{{ integration.source }}</td>
                <td class="align-middle">{{ integration.type }}</td>
                <td class="align-middle">{{ integration.integration_date|date:"Y-m-d" }}</td>
                <td class="align-middle" style="width: 10%">
                    <button class="btn btn-primary" data-bs-toggle="modal" 
                            data-bs-target="#infoModal">Edit
                    </button>
                </td>
            </tr>
        </tbody>
    </table>
    {% include 'forms/edit_integration.html' %}
    {% include 'forms/add_driver.html' %}
    

    <h2> Drivers </h2>
    <div class="mt-5 mb-3 w-25 d-inline">
        <button class="btn btn-success" type="button" data-bs-toggle="modal" data-bs-target="#addDriver" style='margin-bottom: 18px'>
            Add Driver
        </button>
    </div>
    {% if drivers %}
        <table class="table table-striped table-light table-hover">
            <thead>
                <tr>
                    <th class="align-middle">ID</th>
                    <th class="align-middle">Login</th>
                    <th class="align-middle">Password</th>
                    <th class="align-middle">Action</th>
                </tr>
            </thead>
            <tbody>
                {% for driver in drivers %}
                    {% if driver.integration.pk == integration.pk %}
                        <tr>
                            <td class="align-middle">{{ driver.driver_id }}</td>
                            <td class="align-middle">{{ driver.login }}</td>
                            <td class="align-middle">{{ driver.password }}</td>
                            <td class="align-middle" style="width: 10%">
                                <button class="btn btn-primary edit-driver-btn" 
                                        data-bs-toggle="modal" 
                                        data-bs-target="#editinfoModal"
                                        data-driver-id="{{ driver.driver_id }}"
                                        data-login="{{ driver.login }}"
                                        data-password="{{ driver.password }}">
                                    Edit
                                </button>
                            </td>
                        </tr>
                    {% endif %}
                {% endfor %}
            </tbody>
        </table>
    {% endif %}
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.11.6/umd/popper.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/js/bootstrap.min.js"></script>


{% endblock %}